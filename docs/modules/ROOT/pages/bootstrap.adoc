= Bootstrap

This page describes how to setup the K3S cluster on the Raspberry Pi and how to connect to the cluster on my pc.

Thereafter xref:index.adoc#flux2[Flux2] should do the rest of the setup.

== Initial setup

* `k3sup install --ssh-key ~/.config/ssh-ident/identities/personal/id_ed25519 --host 192.168.8.16 --k3s-extra-args="--disable servicelb --disable traefik" --ip 192.168.8.16 --k3s-version=v1.21.0+k3s1 --local-path ~/.config/kube/config`
* `flux check --pre`
* `kubectl create namespace flux-system`
* get secret key file 'sops.gpg' from 1password
* `kubectl create secret generic sops-gpg -n flux-system --from-file sops.asc=sops.gpg`
* `kubectl apply --kustomize=./cluster/base/flux-system`

== cleanup

If you want to start fresh call `+k3s-uninstall.sh+` on the Raspberry Pi.

